{% extends 'mall/base.html' %}
{% load bootstrap4 %}


{% block header %}
    <br><h3>{{ user.username }} çš„è´­ç‰©è½¦</h3>
    <hr>

    {% if my_cart %}
        <div class="row" style="margin: 0">
            <div class="col-2 text-left">
                å›¾ç‰‡å±•ç¤º
            </div>
            <div class="col-2 text-left" style="margin-left: 0">
                å•†å“åç§°
            </div>
            <div class="col-2">
                å•ä»·
            </div>

            <div class="col-2">
                æ•°é‡
            </div>
            <div class="col-2">
                é‡‘é¢
            </div>
            <div class="col-2 text-center">
                æ“ä½œ
            </div>
        </div>
    {% endif %}

    <br>

{% endblock header %}


{% block content %}
    {% for my in my_cart %}
        <div class="row">

            <div class="card mb-3" style="max-height: 100px; width: 100%;">
                <div class="row">
                    <div class="col-md-2">
                        <div style="overflow: hidden;">
                            <div class="zoomImage img-thumbnail"
                                 style="
                                         background-image:url('/media/{{ my.goods.photo }}');
                                         width: 100px;
                                         height: 100px;
                                         {#padding-bottom: 100%;#}
                                         overflow: hidden;
                                         background-position: center center;
                                         background-repeat: no-repeat;
                                         -webkit-background-size: cover;
                                         -moz-background-size: cover;
                                         background-size: cover;"></div>
                        </div>
                    </div>
                    <div class="col-2">
                        <span style="line-height: 100px">&nbsp;&nbsp; {{ my.goods.name }}</span>
                    </div>
                    <div class="col-md-2">
                        <span class="text"
                              style="line-height: 100px; color: coral;"> <strong><small>ï¿¥:</small> {{ my.goods.price|floatformat }}</strong></span>
                    </div>
                    <div class="col-md-2">
                        <span style="line-height: 100px">{{ my.amount }}</span>
                    </div>
                    <div class="col-md-2">
                        <span class="text"
                              style="line-height: 100px; color: coral"> <strong><small>ï¿¥:</small> {{ my.total_cost|floatformat }}</strong></span>
                    </div>
                    <div class="col-2 text-center" style="display: flex; justify-content: center;align-items: center;">

                        <form action="{% url 'mall:cart' %}" method="post" style="margin: 0;">
                            {% csrf_token %}
                            <input name="remove" type="hidden" value="1">
                            <input name="my_id" type="hidden" value="{{ my.id }}">
                            &nbsp;
                            <button type="submit" class="btn btn-sm btn-outline-success">
                                ç§»é™¤
                            </button>
                        </form>
                        &nbsp;
                        <form action="{% url 'mall:send_email' %}" method="post" style="margin: 0;">
                            {% csrf_token %}
                            <input name="my_id" type="hidden" value="{{ my.id }}">
                            <button type="submit" class="btn btn-sm btn-outline-danger">
                                è´­ä¹°
                            </button>
                        </form>

                    </div>
                </div>
            </div>
        </div>
        {% empty %}

        <div class="jumbotron">
            <h1 class="display-4">ğŸ˜€ğŸ˜€ğŸ˜€ <br> è¿™é‡Œç©ºç©ºå¦‚ä¹Ÿã€‚ã€‚ã€‚</h1>
            <p class="lead">
                å¿«å»é€‰è´­å¿ƒä»ªçš„å•†å“å§</p>
            <hr class="my-4">
            <a class="btn btn-outline-success btn-lg" href="{% url 'mall:home' %}" role="button">è¿”å›é¦–é¡µ</a>
        </div>


    {% endfor %}

    <hr>

    {#    ç§»é™¤æ‰€æœ‰å•†å“ï¼Œæœ‰æ—¶é—´çš„è¯å¯ä»¥é€‰æ‹©å®ç°ä¸€ä¸‹ #}
    {#    <form action="{% url 'mall:cart' %}" method="post" style="margin: 0;">#}
    {#        {% csrf_token %}#}
    {#        <input name="remove" type="hidden" value="1">#}
    {#        <input name="my_id" type="hidden" value="{{ my.id }}">#}
    {#        &nbsp;#}
    {#        <button type="submit" class="btn btn-sm btn-outline-success">#}
    {#            ç§»é™¤#}
    {#        </button>#}
    {#    </form>#}

    {% if my_cart %}
        <form method="post" action="{% url 'mall:send_email' %}">
            {% csrf_token %}
            <input name="buy_all" value="yes" type="hidden">
            <button type="submit" class="btn-lg btn-block btn btn-outline-danger">ç»“ç®—æ‰€æœ‰</button>
        </form>
    {% endif %}


{% endblock content %}